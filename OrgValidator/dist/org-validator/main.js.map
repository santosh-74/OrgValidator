{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/org-validator/org-validator.component.ts","./src/app/org-validator/org-validator.component.html","./src/environments/environment.ts","./src/main.ts"],"sourcesContent":["import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'OrgValidator';\n}\n","<app-org-validator></app-org-validator>","import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\n\nimport { AppComponent } from './app.component';\nimport { OrgValidatorComponent } from './org-validator/org-validator.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    OrgValidatorComponent\n  ],\n  imports: [\n    BrowserModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component } from '@angular/core';\nimport * as XLSX from 'xlsx';\n\ninterface OrgEntry {\n  email: string;\n  fullName: string;\n  role: string;\n  reportsTo: string;\n}\n\n@Component({\n  selector: 'app-org-validator',\n  templateUrl: './org-validator.component.html',\n  styleUrls: ['./org-validator.component.scss'],\n})  \nexport class OrgValidatorComponent {\n  uploadedData: OrgEntry[] = [];\n  errorMessages: string[] = [];\n\n  onFileUpload(event: any): void {\n    const target: DataTransfer = <DataTransfer>event.target;\n    if (target.files.length !== 1) {\n      alert('Please upload only one file at a time.');\n      return;\n    }\n\n    const reader: FileReader = new FileReader();\n    reader.onload = (e: any) => {\n      const bstr: string = e.target.result;\n      const wb: XLSX.WorkBook = XLSX.read(bstr, { type: 'binary' });\n      const wsname: string = wb.SheetNames[0];\n      const ws: XLSX.WorkSheet = wb.Sheets[wsname];\n      const data: any[] = XLSX.utils.sheet_to_json(ws, { header: 1 });\n\n      this.processExcelData(data);\n    };\n    reader.readAsBinaryString(target.files[0]);\n  }\n\n  processExcelData(data: any[]): void {\n    this.uploadedData = [];\n    this.errorMessages = [];\n\n    const headers = data[0].map((h: any) => h.toLowerCase().trim());\n    if (\n      !headers.includes('email') ||\n      !headers.includes('fullname') ||\n      !headers.includes('role') ||\n      !headers.includes('reportsto')\n    ) {\n      this.errorMessages.push(\n        'Invalid file format. Make sure the headers are: Email, FullName, Role, ReportsTo.'\n      );\n      return;\n    }\n\n    for (let i = 1; i < data.length; i++) {\n      const row = data[i];\n      this.uploadedData.push({\n        email: row[0]?.trim() || '',\n        fullName: row[1]?.trim() || '',\n        role: row[2]?.trim() || '',\n        reportsTo: row[3]?.trim() || '',\n      });\n    }\n\n    this.validateData();\n  }\n\n  validateData(): void {\n    this.errorMessages = [];\n    const roleHierarchy: any = {\n      Root: ['Admin'],\n      Admin: ['Manager'],\n      Manager: ['Manager', 'Caller'],\n      Caller: [],\n    };\n  \n    const usersMap = new Map<string, OrgEntry>();\n    this.uploadedData.forEach((user) => usersMap.set(user.email, user));\n  \n    const detectCycle = (email: string, visited: Set<string>, stack: Set<string>): boolean => {\n      if (stack.has(email)) return true; \n      if (visited.has(email)) return false;\n  \n      visited.add(email);\n      stack.add(email);\n  \n      const user = usersMap.get(email);\n      if (user) {\n        const reportsToArray = user.reportsTo.split(';').map((r) => r.trim());\n        for (const reportsToEmail of reportsToArray) {\n          if (usersMap.has(reportsToEmail) && detectCycle(reportsToEmail, visited, stack)) {\n            return true;\n          }\n        }\n      }\n  \n      stack.delete(email);\n      return false;\n    };\n  \n    const visited = new Set<string>();\n    for (const user of this.uploadedData) {\n      const stack = new Set<string>();\n      if (detectCycle(user.email, visited, stack)) {\n        this.errorMessages.push(\n          `Cycle detected involving ${user.email} (${user.fullName}). Reporting structure contains a loop.`\n        );\n      }\n    }\n  \n    for (let i = 0; i < this.uploadedData.length; i++) {\n      const user = this.uploadedData[i];\n      const rowIndex = i + 1;\n  \n      if (user.role === 'Root') continue;\n      const reportsToArray = user.reportsTo.split(';').map((r) => r.trim());\n      if (reportsToArray.length > 1) {\n        this.errorMessages.push(\n          `Row ${rowIndex} (${user.email}): ${user.fullName} (${user.role}) is reporting to multiple users: ${user.reportsTo}`\n        );\n        continue;\n      }\n  \n      const reportsToEmail = reportsToArray[0];\n      const parentUser = usersMap.get(reportsToEmail);\n  \n      if (!parentUser) continue;\n  \n      const parentRole = parentUser.role;\n  \n      if (user.role === 'Admin' && parentRole !== 'Root') {\n        this.errorMessages.push(\n          `Row ${rowIndex} (${user.email}): ${user.fullName} (Admin) must report to Root (${parentUser.fullName}), not ${parentRole}.`\n        );\n      }\n  \n      if (user.role === 'Manager' && !['Admin', 'Manager'].includes(parentRole)) {\n        this.errorMessages.push(\n          `Row ${rowIndex} (${user.email}): ${user.fullName} (Manager) cannot report to ${parentUser.fullName} (${parentRole}).`\n        );\n      }\n  \n      if (user.role === 'Caller' && parentRole !== 'Manager') {\n        this.errorMessages.push(\n          `Row ${rowIndex} (${user.email}): ${user.fullName} (Caller) cannot report to ${parentUser.fullName} (${parentRole}).`\n        );\n      }\n    }\n  }\n}\n","<div class=\"container\">\n    <h2>Upload Organization Chart</h2>\n  \n    <input type=\"file\" (change)=\"onFileUpload($event)\" accept=\".xlsx, .xls, .csv\" />\n    <button (click)=\"validateData()\" [disabled]=\"uploadedData.length === 0\">Validate</button>\n  \n    <table *ngIf=\"uploadedData.length > 0\">\n      <thead>\n        <tr>\n          <th>Email</th>\n          <th>Full Name</th>\n          <th>Role</th>\n          <th>Reports To</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let user of uploadedData\">\n          <td>{{ user.email }}</td>\n          <td>{{ user.fullName }}</td>\n          <td>{{ user.role }}</td>\n          <td>{{ user.reportsTo }}</td>\n        </tr>\n      </tbody>\n    </table>\n  \n    <div *ngIf=\"errorMessages.length > 0\" class=\"error-section\">\n      <h3>Validation Errors</h3>\n      <ul>\n        <li *ngFor=\"let error of errorMessages\">{{ error }}</li>\n      </ul>\n    </div>\n  </div>\n  ","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}